<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarekor Sign-Up</title>
    <link rel="icon" href="Images/icon.webp" type="image/x-icon"> 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" 
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="signup-style.css" rel="stylesheet"/> 
    <script>
        function validateForm() {
            var email = document.getElementById("email").value;
            var passsword = document.getElementById("passsword").value;

            if (email.trim() === "" || passsword.trim() === "") {
                alert("Lütfen tüm alanları doldurun.");
                return false;
            }
            return true;
        }

        function registerUser() {
            if (validateForm()) {
                var form = document.getElementById("signup-form");
                var formData = new FormData(form);

                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === XMLHttpRequest.DONE) {
                        if (xhr.status === 200) {
                            alert(xhr.responseText);
                            if (xhr.responseText.trim() === "Yeni kullanıcı başarıyla eklendi.") {
                                window.location.href = "index.html"; 
                            }
                        } else {
                            alert('Bir hata oluştu, lütfen tekrar deneyin.');
                        }
                    }
                };

                xhr.open("POST", form.action, true);
                xhr.send(formData);
            }
        }
    </script>
</head>
<body>
    <form id="signup-form" class="container" action="register.php" method="POST" onsubmit="return false;">
        <div class="box">
            <div class="row">
                <div class="col-sm-5 col-xs-1 box1">
                    <div class="inline-text">
                        <h1>Looks like you are new here</h1>
                        <p>
                            Sign Up with mobile phone number
                        </p>
                    </div>
                </div>
                <div class="col-sm-7 col-xs-11 box-2">
                    <div class="user-id user-data">
                        <input type="email" name="email" id="email" required/>
                        <label for="email">Enter mobile number</label>
                    </div>
                    <div class="user-id user-data">
                        <input type="passsword" name="passsword" id="passsword" required />
                        <label>Enter password</label>    
                    </div>
                    
                    <div class="user-id">
                        <p>By continuing you agree to Tarekor's privacy</p>
                    </div>
                    <div class="user-id button">
                        <input type="button" value="Register" onclick="registerUser()" class="register-button">
                    </div>
                    <div class="user-id">
                        <p><a href="login.html" class="existing-user-link">Existing User?Login</a></p>
                       
                    </div>
                </div>
            </div>
        </div>
    </form>
</body>
</html>
